# Database Configuration
# Source database connection (for ingestion)
SOURCE_DB_URL=postgresql://user:password@localhost:5432/source_db
# Or MySQL: mysql+pymysql://user:password@localhost:3306/source_db

# Destination database (PostgreSQL for persistence)
DEST_DB_URL=postgresql://user:password@localhost:5432/dest_db

# Redis Configuration (for task queue and idempotency)
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# Celery Configuration
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=["json"]

# Pipeline Configuration
BATCH_SIZE=10000
MAX_WORKERS=4
DEFAULT_CHUNK_SIZE=10000

# Retry Configuration
MAX_RETRIES=3
RETRY_BACKOFF_BASE=2.0
RETRY_DELAY=1.0

# Idempotency Configuration
IDEMPOTENCY_KEY_TTL_DAYS=7
IDEMPOTENCY_ENABLED=true

# Schema Registry Configuration
SCHEMA_REGISTRY_TABLE=schema_versions

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json

# API Configuration (optional)
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=false

# Connection Pool Configuration
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_PRE_PING=true

# Worker Configuration
WORKER_CONCURRENCY=4
WORKER_MAX_TASKS_PER_CHILD=1000
